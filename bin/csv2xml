#!/usr/bin/env php
<?php

declare(strict_types=1);

use BrickLib\Exporter\BrickLinkXmlExporter;
use BrickLib\Importer\LddCsvImporter;
use BrickLib\Writer\StdoutWriter;

require __DIR__.'/../vendor/autoload.php';

if (!isset($argv[1])) {
    printf("Usage: php %s <filename>" . PHP_EOL, $argv[0]);
    return 1;
}

if (!file_exists($argv[1])) {
    printf("File '%s' does not exist." . PHP_EOL, $argv[1]);
    return 2;
}

$importer = new LddCsvImporter();
$collection = $importer->readFile(new SplFileInfo($argv[1]));

$writer = new StdoutWriter();

$exporter = new BrickLinkXmlExporter();
$exporter->export($collection, $writer);

return 0;
